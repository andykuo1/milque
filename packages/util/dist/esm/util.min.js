function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}class e{constructor(t){this._heap=[],this._comparator=t}get size(){return this._heap.length}clear(){this._heap.length=0}push(...t){for(const e of t)this._heap.push(e),this._shiftUp()}pop(){const t=this.peek();let e=this._heap.length-1;return e>0&&this._swap(0,e),this._heap.pop(),this._shiftDown(),t}replace(t){const e=this.peek();return this._heap[0]=t,this._shiftDown(),e}peek(){return this._heap[0]}_compare(t,e){return this._comparator(this._heap[t],this._heap[e])}_swap(t,e){let s=this._heap[t];this._heap[t]=this._heap[e],this._heap[e]=s}_shiftUp(){let t,e=this._heap.length-1;for(;e>0&&this._compare(e,t=(e+1>>>1)-1);)this._swap(e,t),e=t}_shiftDown(){const t=this._heap.length;let e,h=0,r=s(h),i=r<t,a=n(h),o=a<t;for(;i&&this._compare(r,h)||o&&this._compare(a,h);)e=o&&this._compare(a,r)?a:r,this._swap(h,e),h=e,r=s(h),i=r<t,a=n(h),o=a<t}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}}function s(t){return 1+(t<<1)}function n(t){return t+1<<1}const h={on(t,e,s=e){let n;if(this.__events.has(t)?n=this.__events.get(t):(n=new Map,this.__events.set(t,n)),n.has(s))throw new Error(`Found callback for event '${t}' with the same handle '${s}'.`);return n.set(s,e),this},off(t,e){if(!this.__events.has(t))throw new Error(`Unable to find event '${t}'.`);{const s=this.__events.get(t);if(!s.has(e))throw new Error(`Unable to find callback for event '${t}' with handle '${e}'.`);s.delete(e)}return this},once(t,e,s=e){return this.on(t,(...n)=>{this.off(t,s),e.apply(this.__context||this,n)},s)},emit(t,...e){if(this.__events.has(t)){const s=Array.from(this.__events.get(t).values());for(const t of s)t.apply(this.__context||this,e)}else this.__events.set(t,new Map);return this}};function r(t){const e=Object.create(h);return e.__events=new Map,e.__context=t,e}function i(t,e){const s=Object.assign(t,h);return s.__events=new Map,s.__context=e,s}function a(t,e){const s=t.prototype;return Object.assign(s,h),s.__events=new Map,s.__context=e,s}var o={create:r,assign:i,mixin:a},_=Object.freeze({__proto__:null,create:r,assign:i,mixin:a,default:o});export{_ as Eventable,e as PriorityQueue,t as uuid};
