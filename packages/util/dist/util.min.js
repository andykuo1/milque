!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Utils={})}(this,(function(t){"use strict";function e(t){return 1+(t<<1)}function s(t){return t+1<<1}const n={on(t,e,s=e){let n;if(this.__events.has(t)?n=this.__events.get(t):(n=new Map,this.__events.set(t,n)),n.has(s))throw new Error(`Found callback for event '${t}' with the same handle '${s}'.`);return n.set(s,e),this},off(t,e){if(!this.__events.has(t))throw new Error(`Unable to find event '${t}'.`);{const s=this.__events.get(t);if(!s.has(e))throw new Error(`Unable to find callback for event '${t}' with handle '${e}'.`);s.delete(e)}return this},once(t,e,s=e){return this.on(t,(...n)=>{this.off(t,s),e.apply(this.__context||this,n)},s)},emit(t,...e){if(this.__events.has(t)){let s=[];const n=Array.from(this.__events.get(t).values());for(const t of n){let n=t.apply(this.__context||this,e);n&&s.push(n)}return s}return this.__events.set(t,new Map),[]}};function h(t){const e=Object.create(n);return e.__events=new Map,e.__context=t,e}function i(t,e){const s=Object.assign(t,n);return s.__events=new Map,s.__context=e,s}function r(t,e){const s=t.prototype;return Object.assign(s,n),s.__events=new Map,s.__context=e,s}var o={create:h,assign:i,mixin:r},a=Object.freeze({__proto__:null,create:h,assign:i,mixin:r,default:o});t.Eventable=a,t.PriorityQueue=class{constructor(t){this._heap=[],this._comparator=t}get size(){return this._heap.length}clear(){this._heap.length=0}push(...t){for(const e of t)this._heap.push(e),this._shiftUp()}pop(){const t=this.peek();let e=this._heap.length-1;return e>0&&this._swap(0,e),this._heap.pop(),this._shiftDown(),t}replace(t){const e=this.peek();return this._heap[0]=t,this._shiftDown(),e}peek(){return this._heap[0]}_compare(t,e){return this._comparator(this._heap[t],this._heap[e])}_swap(t,e){let s=this._heap[t];this._heap[t]=this._heap[e],this._heap[e]=s}_shiftUp(){let t,e=this._heap.length-1;for(;e>0&&this._compare(e,t=(e+1>>>1)-1);)this._swap(e,t),e=t}_shiftDown(){const t=this._heap.length;let n,h=0,i=e(h),r=i<t,o=s(h),a=o<t;for(;r&&this._compare(i,h)||a&&this._compare(o,h);)n=a&&this._compare(o,i)?o:i,this._swap(h,n),h=n,i=e(h),r=i<t,o=s(h),a=o<t}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}},t.uuid=function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)},Object.defineProperty(t,"__esModule",{value:!0})}));
